---
title: 洞察与分析
description: 了解如何访问 Docker Hub 上镜像的使用统计信息
keywords: docker hub, hub, insights, analytics, api, verified publisher
aliases:
- /docker-hub/publish/insights-analytics/
- /docker-hub/insights-analytics/
- /trusted-content/insights-analytics/
---

洞察与分析为 Docker Hub 上的 Docker 认证发布者 (DVP) 和 Docker 赞助开源 (DSOS) 镜像提供使用分析。这包括对所需时间跨度内镜像和扩展使用指标的自助访问。您还可以显示按标签或按摘要的镜像拉取次数，并获取按地理位置、云提供商、客户端等的细分。

<!-- prettier-ignore -->
> [!TIP]
>
> 前往
[Docker 认证发布者计划](https://www.docker.com/partners/programs/) 或 [Docker 赞助开源](https://www.docker.com/community/open-source/application/#) 页面
了解更多关于这些计划的信息。

## 查看镜像的分析数据

您可以在以下 URL 的 **Insights and analytics** 仪表板上找到仓库的分析数据：
`https://hub.docker.com/orgs/{namespace}/insights/images`。仪表板包含使用数据的可视化和一个可以下载 CSV 文件数据的表格。

要在图表中查看数据：

- 选择数据粒度：每周或每月
- 选择时间间隔：3、6 或 12 个月
- 在列表中选择一个或多个仓库

![Insights and analytics chart visualization](../../../images/chart.png)

<!-- prettier-ignore -->
> [!TIP]
>
> 将光标悬停在图表上会显示工具提示，显示特定时间点的精确数据。

### 共享分析数据

您可以使用图表上方的 **Share** 图标与他人共享可视化。这是与组织中其他人共享统计数据的便捷方式。

![Chart share icon](../../../images/chart-share-icon.png)

选择该图标会生成一个复制到剪贴板的链接。该链接保留您所做的显示选择。当有人访问该链接时，**Insights and analytics** 页面会打开并显示与您创建链接时设置的相同配置的图表。

## 扩展分析数据

如果您已在扩展市场发布了 Docker 扩展，您还可以获取有关扩展使用情况的分析，以 CSV 文件形式提供。
您可以从以下 URL 的 **Insights and analytics** 仪表板下载扩展 CSV 报告：
`https://hub.docker.com/orgs/{namespace}/insights/extensions`。如果您的 Docker 命名空间包含市场中已知的扩展，您将看到一个 **Extensions** 标签页，列出您扩展的 CSV 文件。

## 导出分析数据

您可以从 Web 仪表板或使用 [DVP 数据 API](/reference/api/hub/dvp.md) 导出分析数据。组织的所有成员都可以访问分析数据。

数据以可下载的 CSV 文件形式提供，格式为每周（周一至周日）或每月。每月数据从下一个日历月的第一天开始提供。您可以将此数据导入自己的系统，也可以作为电子表格手动分析。

### 导出数据

按照以下步骤使用 Docker Hub 网站导出组织镜像的使用数据：

1.  登录 [Docker Hub](https://hub.docker.com/) 并选择 **My Hub**。

2.  选择您的组织并选择 **Analytics**。

    ![Organization overview page, with the Insights and Analytics tab](../../../images/organization-tabs.png)

3.  设置要导出分析数据的时间跨度。

    摘要和原始数据的可下载 CSV 文件会出现在右侧。

    ![Filtering options and download links for analytics data](../../../images/download-analytics-data.png)

### 使用 API 导出数据

HTTP API 端点可在以下位置访问：
`https://hub.docker.com/api/publisher/analytics/v1`。在 [DVP 数据 API 文档](/reference/api/hub/dvp.md) 中了解如何使用 API 导出数据。

## 数据点

以原始或摘要格式导出数据。每种格式包含不同的数据点和不同的结构。

以下部分描述了每种格式的可用数据点。**添加日期** 列显示该字段首次引入的时间。

### 镜像拉取原始数据

原始数据格式包含以下数据点。CSV 文件中的每一行代表一次镜像拉取。

| 数据点                    | 描述                                                                                                  | 添加日期        |
| ----------------------------- | ------------------------------------------------------------------------------------------------------------ | ----------------- |
| Action                        | 请求类型，参见 [操作分类规则][1]。取值为 `pull_by_tag`、`pull_by_digest`、`version_check` 之一。 | 2022年1月1日   |
| Action day                    | 时间戳的日期部分：`YYYY-MM-DD`。                                                                 | 2022年1月1日   |
| Country                       | 请求来源国家。                                                                                      | 2022年1月1日   |
| Digest                        | 镜像摘要。                                                                                                | 2022年1月1日   |
| HTTP method                   | 请求中使用的 HTTP 方法，详见 [注册表 API 文档][2]。                            | 2022年1月1日   |
| Host                          | 事件中使用的云服务提供商。                                                                 | 2022年1月1日   |
| Namespace                     | Docker [组织][3]（镜像命名空间）。                                                  | 2022年1月1日   |
| Reference                     | 请求中使用的镜像摘要或标签。                                                                     | 2022年1月1日   |
| Repository                    | Docker [仓库][4]（镜像名称）。                                                         | 2022年1月1日   |
| Tag（可用时包含） | 仅当请求引用了标签时才可用的标签名称。                                             | 2022年1月1日   |
| Timestamp                     | 请求的日期和时间：`YYYY-MM-DD 00:00:00`。                                                          | 2022年1月1日   |
| Type                          | 事件来源的行业。取值为 `business`、`isp`、`hosting`、`education`、`null` 之一。       | 2022年1月1日   |
| User agent tool               | 用户用于拉取镜像的应用程序（例如，`docker` 或 `containerd`）。                        | 2022年1月1日   |
| User agent version            | 用于拉取镜像的应用程序版本。                                                        | 2022年1月1日   |
| Domain                        | 请求来源域名，参见 [隐私](#隐私)。                                                              | 2022年10月11日  |
| Owner                         | 拥有仓库的组织名称。                                                       | 2022年12月19日 |

[1]: #镜像拉取操作分类规则
[2]: /registry/spec/api/
[3]: /admin/organization/orgs/
[4]: /docker-hub/repos/

### 镜像拉取摘要数据

有两个级别的摘要数据可用：

- 仓库级别，每个命名空间和仓库的摘要
- 标签或摘要级别，每个命名空间、仓库和引用（标签或摘要）的摘要

摘要数据格式包含所选时间跨度的以下数据点：

| 数据点        | 描述                                             | 添加日期        |
| ----------------- | ------------------------------------------------------- | ----------------- |
| Unique IP address | 唯一 IP 地址数量，参见 [隐私](#隐私)。 | 2022年1月1日   |
| Pull by tag       | 按摘要或按标签的 GET 请求。                       | 2022年1月1日   |
| Pull by digest    | 按摘要的 GET 或 HEAD 请求，或按摘要的 HEAD 请求。       | 2022年1月1日   |
| Version check     | 按标签的 HEAD 请求，后面没有跟随 GET 请求                      | 2022年1月1日   |
| Owner             | 拥有仓库的组织名称。  | 2022年12月19日 |

### 镜像拉取操作分类规则

操作代表与 `docker pull` 相关联的多个请求事件。拉取按类别分组，以使数据更有意义地理解用户行为和意图。类别包括：

- 版本检查
- 按标签拉取
- 按摘要拉取

自动化系统经常检查您镜像的新版本。能够区分 CI 中的"版本检查"与用户的实际镜像拉取，让您更深入地了解用户的行为。

下表描述了用于确定拉取意图的规则。要提供反馈或询问有关这些规则的问题，
[填写 Google 表单](https://forms.gle/nb7beTUQz9wzXy1b6)。

| 起始事件 | 引用 | 后续操作                                                     | 结果操作 | 用例                                                                                                    | 备注                                                                                                                                                                                                                                                                                 |
| :------------- | :-------- | :-------------------------------------------------------------- | :--------------- | :------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| HEAD           | tag       | 无                                                             | Version check    | 用户本地机器上已存在所有层                                                          | 这类似于当用户本地已存在所有镜像层时按标签拉取的用例，但是它区分了用户意图并据此分类。                                                                                              |
| GET            | tag       | 无                                                             | Pull by tag      | 用户本地机器上已存在所有层和/或镜像是单架构                          |                                                                                                                                                                                                                                                                                       |
| GET            | tag       | 按不同摘要的 Get                                         | Pull by tag      | 镜像是多架构                                                                                            | 第二个按摘要的 GET 必须与第一个不同。                                                                                                                                                                                                                                |
| HEAD           | tag       | 按相同摘要的 GET                                              | Pull by tag      | 镜像是多架构但本地机器上已存在部分或全部镜像层                            | 按标签的 HEAD 发送最新的摘要，后续的 GET 必须是按相同摘要。如果镜像是多架构的，可能会有额外的 GET（参见本表的下一行）。如果用户不想要最新的摘要，则用户执行按摘要的 HEAD。 |
| HEAD           | tag       | 按相同摘要的 GET，然后按不同摘要的第二个 GET | Pull by tag      | 镜像是多架构                                                                                            | 按标签的 HEAD 发送最新的摘要，后续的 GET 必须是按相同摘要。由于镜像是多架构的，有第二个按不同摘要的 GET。如果用户不想要最新的摘要，则用户执行按摘要的 HEAD。                      |
| HEAD           | tag       | 按相同摘要的 GET，然后按不同摘要的第二个 GET       | Pull by tag      | 镜像是多架构                                                                                            | 按标签的 HEAD 发送最新的摘要，后续的 GET 必须是按相同摘要。由于镜像是多架构的，有第二个按不同摘要的 GET。如果用户不想要最新的摘要，则用户执行按摘要的 HEAD。                     |
| GET            | digest    | 无                                                             | Pull by digest   | 用户本地机器上已存在所有层和/或镜像是单架构                          |                                                                                                                                                                                                                                                                                       |
| HEAD           | digest    | 无                                                             | Pull by digest   | 用户本地机器上已存在所有层                                                    |                                                                                                                                                                                                                                                                                       |
| GET            | digest    | 按不同摘要的 GET                                         | Pull by digest   | 镜像是多架构                                                                                            | 第二个按摘要的 GET 必须与第一个不同。                                                                                                                                                                                                                            |
| HEAD           | digest    | 按相同摘要的 GET                                              | Pull by digest   | 镜像是单架构和/或镜像是多架构但本地机器上已存在部分镜像 |                                                                                                                                                                                                                                                                                       |
| HEAD           | digest    | 按相同摘要的 GET，然后按不同摘要的第二个 GET       | Pull by Digest   | 镜像是多架构                                                                                            |                                                                                                                                                                                                                                                                                       |

### 扩展摘要数据

有两个级别的扩展摘要数据可用：

- 核心摘要，包含基本的扩展使用信息：扩展安装次数、卸载次数和所有时间的总安装次数

核心摘要数据文件包含所选时间跨度的以下数据点：

| 数据点        | 描述                                             | 添加日期        |
| ----------------- | ------------------------------------------------------- | ----------------- |
| Installs          | 扩展的安装次数                    | 2024年2月1日       |
| TotalInstalls     | 扩展所有时间的安装次数          | 2024年2月1日       |
| Uninstalls        | 扩展的卸载次数                  | 2024年2月1日       |
| TotalUninstalls   | 扩展所有时间的卸载次数        | 2024年2月1日       |
| Updates           | 扩展的更新次数                     | 2024年2月1日       |

- 高级摘要，包含高级扩展使用信息：按唯一用户计的安装、卸载次数，按唯一用户计的扩展打开次数。

核心摘要数据文件包含所选时间跨度的以下数据点：

| 数据点        | 描述                                             | 添加日期        |
| ----------------- | ------------------------------------------------------- | ----------------- |
| Installs          | 扩展的安装次数                    | 2024年2月1日       |
| UniqueInstalls    | 安装扩展的唯一用户数         | 2024年2月1日       |
| Uninstalls        | 扩展的卸载次数                  | 2024年2月1日       |
| UniqueUninstalls  | 卸载扩展的唯一用户数       | 2024年2月1日       |
| Usage             | 扩展标签页的打开次数                 | 2024年2月1日       |
| UniqueUsers       | 打开扩展标签页的唯一用户数       | 2024年2月1日       |

## 数据随时间的变化

洞察与分析服务持续改进，以增加其为发布者带来的价值。某些更改可能包括添加新的数据点或改进现有数据以使其更有用。

数据集的更改，例如添加或删除的字段，通常仅从字段首次引入的日期开始适用，并向前延续。

请参阅 [数据点](#数据点) 部分中的表格，了解给定数据点从哪个日期开始可用。

## 隐私

本节包含有关隐私保护措施的信息，确保 Docker Hub 上的内容消费者保持完全匿名。

<!-- prettier-ignore -->
> [!IMPORTANT]
>
> Docker 从不在分析数据中共享任何个人身份信息 (PII)。

镜像拉取摘要数据集包括唯一 IP 地址计数。此数据点仅包括请求镜像的不同唯一 IP 地址的数量。永远不会共享单个 IP 地址。

镜像拉取原始数据集包括用户 IP 域名作为数据点。这是与用于拉取镜像的 IP 地址关联的域名。如果 IP 类型是 `business`，域名代表与该 IP 地址关联的公司或组织（例如，`docker.com`）。对于任何不是 `business` 的其他 IP 类型，域名代表用于发出请求的互联网服务提供商或托管提供商。平均而言，只有约 30% 的拉取被归类为 `business` IP 类型（这在不同发布者和镜像之间有所不同）。
