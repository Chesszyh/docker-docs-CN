---
description: Windows 版 Docker Desktop 2.x 发行说明
keywords: Docker Desktop for Windows 2.x, release notes, 发行说明
title: Windows 版 Docker 2.x 发行说明
toc_min: 1
toc_max: 2
alias: /desktop/windows/release-notes/2.x/
sitemap: false
---

本页包含 Windows 版 Docker Desktop 2.x 的发行说明。

## Docker Desktop Community 2.5.0.1
2020-11-10

### 升级

- [Compose CLI v1.0.2](https://github.com/docker/compose-cli/releases/tag/v1.0.2)
- [Snyk v1.424.4](https://github.com/snyk/snyk/releases/tag/v1.424.4)

## Docker Desktop Community 2.5.0.0
2020-11-02

Docker Desktop 2.5.0.0 包含 Kubernetes 升级。安装此版本后，您的本地 Kubernetes 集群将被重置。

### 新特性

- 拥有付费 Docker 订阅的用户现在可以在 Docker Desktop 的“远程存储库”选项卡上查看漏洞扫描报告。
- Docker Desktop 为拥有付费 Docker 订阅的用户引入了支持选项。

### 升级

- [Linux 内核 5.4.39](https://hub.docker.com/layers/linuxkit/kernel/5.4.39-f39f83d0d475b274938c86eaa796022bfc7063d2/images/sha256-8614670219aca0bb276d4749e479591b60cd348abc770ac9ecd09ee4c1575405?context=explore)
- [Docker Compose CLI 1.0.1](https://github.com/docker/compose-cli/releases/tag/v1.0.1)
- [Snyk v1.421.1](https://github.com/snyk/snyk/releases/tag/v1.421.1)
- [Go 1.15.2](https://github.com/golang/go/releases/tag/go1.15.2)
- [Kubernetes 1.19.3](https://github.com/kubernetes/kubernetes/releases/tag/v1.19.3)

### 弃用

- Docker Desktop 无法再安装在 Windows 1703 (内部版本 15063) 上。

### 错误修复与微调

- 将 “Run Diagnostics” 重命名为 “Get support”。
- 修复了一个间歇性导致 WSL 2 后端启动失败的问题。
- 修复了与 NFS 挂载相关的问题。参见 [docker/for-mac#4958](https://github.com/docker/for-mac/issues/4958)。
- 修复了如果 bash 在 Docker Desktop 之前启动，则在 WSL 中找不到 Docker CLI 的问题。
- 修复了 HTTP 代理排除列表中包含 `localhost` 或 `127.0.0.1` 条目的问题。修复了 [docker/for-win#8750](https://github.com/docker/for-win/issues/8750)。
- 当 WSL 集成进程意外停止时，现在会通知用户并由用户决定是否重启，而不是循环尝试重启。修复了 [docker/for-win#8968](https://github.com/docker/for-win/issues/8968)。
- 修复了高负载下容器日志滞后的问题。修复了 [docker/for-win#8216](https://github.com/docker/for-win/issues/8216)。
- 诊断：避免在 Kubernetes 处于损坏状态时挂起。
- 修复了当用户名包含空格时，安装程序日志文件默认位置的路径问题。修复了 [docker/for-win#7941](https://github.com/docker/for-win/issues/7941)。
- 修复了某些网络插件可能加载失败，导致 Docker 守护进程崩溃的问题 [docker/for-win#9282](https://github.com/docker/for-win/issues/9282)。
- 在将文件共享到容器中时（例如 `docker run -v ~/.gitconfig`），Docker Desktop 不再监视其父目录。修复了 [docker/for-mac#4981](https://github.com/docker/for-mac/issues/4981)。

## Docker Desktop Community 2.4.0.0
2020-09-30

Docker Desktop 2.4.0.0 包含 Kubernetes 升级。安装此版本后，您的本地 Kubernetes 集群将被重置。

### 新特性

- [Docker Compose CLI - 0.1.18](https://github.com/docker/compose-cli)，支持通过 ECS 和 ACI 在 Compose 中使用卷和云。
- Docker 在控制面板中引入了全新的镜像（Images）视图。镜像视图允许用户查看 Hub 镜像、拉取镜像以及管理磁盘上的本地镜像，包括清理不需要和未使用的镜像。要访问新镜像视图，请从 Docker 菜单中选择 **Dashboard** > **Images**。
- 恢复出厂设置后，Docker Desktop 现在默认启用 BuildKit。要恢复到旧版 `docker build` 体验，请前往 **Settings** > **Docker Engine** 并禁用 BuildKit 功能。
- [Amazon ECR 凭据辅助程序](https://github.com/awslabs/amazon-ecr-credential-helper/releases/tag/v0.4.0)

### 升级

- [Docker 19.03.13](https://github.com/docker/docker-ce/releases/tag/v19.03.13)
- [Docker Compose 1.27.4](https://github.com/docker/compose/releases/tag/1.27.4)
- [Go 1.14.7](https://github.com/golang/go/releases/tag/go1.14.7)
- [Alpine 3.12](https://alpinelinux.org/posts/Alpine-3.12.0-released.html)
- [Kubernetes 1.18.8](https://github.com/kubernetes/kubernetes/releases/tag/v1.18.8)
- [Qemu 4.2.0](https://git.qemu.org/?p=qemu.git;a=tag;h=1e4aa2dad329852aa6c3f59cefd65c2c2ef2062c)

### 错误修复与微调

- 移除了旧版 Kubernetes 上下文 `docker-desktop`。应改用 `docker-desktop` 上下文。修复了 [docker/for-win#5089](https://github.com/docker/for-win/issues/5089) 和 [docker/for-mac#4089](https://github.com/docker/for-mac/issues/5089)。
- 从安装程序中移除了“以 Windows 容器模式启动”的选项。
- 将应用程序固定到任务栏后，如果 Docker 已在运行，点击它将启动容器视图。
- 左键点击系统托盘中的鲸鱼图标现在会启动控制面板容器视图。
- Docker Desktop 现在针对深色和浅色模式使用不同的系统托盘图标。修复了 [docker/for-win#4113](https://github.com/docker/for-win/issues/4113)。
- 增加了通过 Qemu 4.2.0 模拟 Risc-V 的支持。
- 添加了可通过 `putty -serial \\.\pipe\dockerDebugShell` 访问的底层调试 shell。
- 将不带 ANSI 颜色的容器日志复制到剪贴板。修复了 [docker/for-mac#4786](https://github.com/docker/for-mac/issues/4786)。
- 修复了在 Docker `daemon.json` 中指定了 `hosts` 时应用程序启动的问题。参见 [docker/for-win#6895](https://github.com/docker/for-win/issues/6895#issuecomment-637429117)。
- 修复了短名称的 DNS 解析。参见 [docker/for-win#4425](https://github.com/docker/for-win/issues/4425)。
- 从 `chronyd` 切换到 `sntpcd` 以解决宿主机时间同步问题。修复了 [docker/for-win#4526](https://github.com/docker/for-win/issues/4526)。
- 避免在设置了“在没有 TLS 的情况下在 tcp://localhost:2375 公开守护进程”且 `localhost:2375` 已被其他程序占用的情况下阻塞启动。参见 [docker/for-win#6929](https://github.com/docker/for-win/issues/6929) 和 [docker/for-win#6961](https://github.com/docker/for-win/issues/6961)。
- 修复了在设置中添加不存在驱动器上的文件夹会创建空条目的问题。参见 [docker/for-win#6797](https://github.com/docker/for-win/issues/6797)。
- 避免在共享卷上的文件 I/O 期间因“Function not implemented”而失败。修复了 [docker/for-win#5955](https://github.com/docker/for-win/issues/5955)。
- 确保 `docker run -v /var/run/docker.sock` 能够正确重写 Windows 路径，参见 [docker/for-win#6628](https://github.com/docker/for-win/issues/6628)。
- 修复了 Docker Desktop 加载损坏的 Docker CLI 配置文件时发生的崩溃。修复了 [docker/for-win#6657](https://github.com/docker/for-win/issues/6657)。
- 确保 `localhost` 和 `127.0.0.1` 均可用于代理设置，以重定向到宿主机上的代理。修复了 [docker/for-win#5715](https://github.com/docker/for-win/issues/5715) 和 [docker/for-win#6260](https://github.com/docker/for-win/issues/6260)。
- 修复了在没有互联网连接时登录失败导致的崩溃。
- 修复了处理包含 ".." 字符的共享卷路径时的 Bug。修复了 [docker/for-win#5375](https://github.com/docker/for-win/issues/5375)。
- 在横幅通知中报告检查更新的错误。修复了 [docker/for-win#6364](https://github.com/docker/for-win/issues/6364)。
- 修复了一个升级 Bug：仍在使用基于 PowerShell 的虚拟机管理版本的用户可能会遇到静默卸载崩溃，导致 Docker Desktop 被卸载而不是被升级。
- 修复了当用户名包含空格时，安装程序日志文件默认位置的路径问题。修复了 [docker/for-win#7941](https://github.com/docker/for-win/issues/7941)。
- Docker Desktop 在容器启动时始终同步刷新文件系统缓存。参见 [docker/for-mac#4943](https://github.com/docker/for-mac/issues/4943)。
- Compose-on-Kubernetes 不再包含在 Docker Desktop 安装程序中。您可以从 compose-on-kubernetes [发布页面](https://github.com/docker/compose-on-kubernetes/releases) 单独下载。

### WSL 2 变更

- Docker 上下文现已在 Windows 和 WSL 发行版之间同步。
- 修复了间歇性导致后端启动失败的问题。
- 修复了 glibc 不兼容时发生的代理崩溃。参见 [docker/for-win#8183](https://github.com/docker/for-win/issues/8183)。
- 修复了移除挂载 `/mnt/wsl` 的容器会破坏 WSL 集成的问题。参见 [docker/for-win#7836](https://github.com/docker/for-win/issues/7836)。
- 增加了对使用 Windows CLI 挂载发行版中文件的支持（例如 `docker run -v \\wsl$\\Ubuntu\\home\\simon\\web:/web ...`）。
- 修复了尝试使用相对路径的共享卷时的错误消息。修复了 [docker/for-win#6894](https://github.com/docker/for-win/issues/6894)。
- 修复了将 Windows 更新到支持 WSL 2 的版本时，配置文件被旧的 Hyper-V VM 锁定的问题。
- 修复了 WSL 2 内部和外部 Docker Compose 版本不一致的问题。修复了 [docker/for-win#6461](https://github.com/docker/for-win/issues/6461)。
- 检测 `docker-desktop` WSL 发行版何时停止并显示更清晰的错误消息。
- 修复了公开端口时的竞态条件。
- 启用对话框不再阻塞其他窗口。

### 已知问题

- 在将 `docker-compose` 与命名卷及 gRPC FUSE 配合使用时存在已知问题：第二次及后续的 `docker-compose up` 调用将因卷路径带有 `/host_mnt` 前缀而失败。
- 启用 Kubernetes 时存在已知问题，即设置 UI 有时无法成功更新 Kubernetes 状态。要解决此问题，请关闭并重新打开窗口。
- 切换用户时存在罕见的已知问题，即镜像 UI 有时会继续显示上一个用户的存储库。要解决此问题，请关闭并重新打开窗口。

## Docker Desktop Community 2.3.0.5
2020-09-15

### 新特性

- Docker CLI 中新增的云集成功能使得通过 Amazon ECS 或 Microsoft ACI 在云端运行容器变得更加容易。 

### 升级

- [Docker Compose 1.27.2](https://github.com/docker/compose/releases/tag/1.27.2)
- [云集成 v0.1.15](https://github.com/docker/aci-integration-beta/releases/tag/v0.1.15)

### 错误修复与微调

- WSL2：修复了使用不兼容的 glibc 时的崩溃。参见 [docker/for-win#8183](https://github.com/docker/for-win/issues/8183)。

### 已知问题

- 在 i386 镜像中，`clock_gettime64` 系统调用返回 `EPERM` 而不是 `ENOSYS`。要解决此问题，请通过使用 `--privileged` 标志禁用 `seccomp`。参见 [docker/for-win#8326](https://github.com/docker/for-win/issues/8326)。

## Docker Desktop Community 2.3.0.4
2020-07-27

### 升级

- [Docker 19.03.12](https://github.com/docker/docker-ce/releases/tag/v19.03.12)
- [Docker Compose 1.26.2](https://github.com/docker/compose/releases/tag/1.26.2)
- [Go 1.13.14](https://github.com/golang/go/issues?q=milestone%3AGo1.13.14+label%3ACherryPickApproved)

### 错误修复与微调

- Docker Desktop 现在会提示用户共享路径如 `////c/Users/foo` 的目录，而不仅是 `C:\Users\foo` 和 `C:/Users/foo`。
- 安装程序现在在出错或用户取消安装时返回非零退出代码。
- 修复了当用户名包含空格时，安装程序日志文件默认位置的路径问题。修复了 [docker/for-win#6552](https://github.com/docker/for-win/issues/6552)。
- 控制面板：修复了为 Windows 容器打开 CLI 的问题。参见 [docker/for-win#7079](https://github.com/docker/for-win/issues/7079)。
- 控制面板：修复了容器日志有时被截断的问题。修复了 [docker/for-win#5954](https://github.com/docker/for-win/issues/5954)。
- WSL 2：修复了更改用户默认 shell 导致 WSL 集成受阻的问题。修复了 [docker/for-win#7653](https://github.com/docker/for-win/issues/7653)。
- WSL 2：修复了恢复卡在“正在安装”状态的 WSL 发行版的问题。

## Docker Desktop Community 2.3.0.3
2020-05-27

### 升级

- [Linux 内核 4.19.76](https://hub.docker.com/layers/docker/for-desktop-kernel/4.19.76-83885d3b4cff391813f4262099b36a529bca2df8-amd64/images/sha256-0214b82436af70054e013ea51cb1fea72bd943d0d6245b6521f1ff09a505c40f?context=repo)

### 错误修复与微调

- 修复了在禁用 Hyper-V 的情况下恢复出厂设置导致的崩溃。修复了 [docker/for-win#6738](https://github.com/docker/for-win/issues/6738)。
- 修复了从 WSL 2 运行的应用中通过 VS Code 打开应用程序的问题。修复了 [docker/for-win#6472](https://github.com/docker/for-win/issues/6472)。
- 修复了 WSL 2 中的 Swarm 挂载。修复了 [docker/for-win#6507](https://github.com/docker/for-win/issues/6507)。
- 修复了使用 Microsoft `mssql` 镜像时的 Bug。修复了 [docker/for-win#6646](https://github.com/docker/for-win/issues/6646)。
- 为共享文件系统实现了 `fallocate`。参见 [docker/for-win#6658](https://github.com/docker/for-win/issues/6658#issuecomment-627736820)。
- 修复了当系统上存在旧版或部分卸载版本的 Docker Desktop 时导致的安装程序崩溃。修复了 [docker/for-win#6536](https://github.com/docker/for-win/issues/6536)。
- 修复了打开系统托盘菜单时导致的延迟。修复了 [docker/for-win#1011](https://github.com/docker/for-win/issues/1011)。
- 修复了一个回归问题：容器不再能使用宿主机驱动器盘符引用挂载的文件夹。修复了 [docker/for-win#6628](https://github.com/docker/for-win/issues/6628)。
- 修复了一个回归问题：使用双前导斜杠表示法共享文件夹会失败。修复了 [docker/for-win#6668](https://github.com/docker/for-win/issues/6668)。
- 在嵌入式 Linux 内核中重新加入了 device-mapper。修复了 [docker/for-mac#4549](https://github.com/docker/for-mac/issues/4549)。
- 修复了导致绑定挂载中的 `:z` 属性失效的问题。修复了 [docker/for-win#6634](https://github.com/docker/for-win/issues/6634)。

## Docker Desktop Community 2.3.0.2
2020-05-11

### 新特性

- Windows 10 家庭版用户现在可以通过 WSL 2 使用 Docker Desktop。这需要 Windows 10 2004 版本或更高。有关更多信息，请参阅 [在 Windows 上安装 Docker Desktop](/manuals/desktop/setup/install/windows-install.md)。
- Docker Desktop 在首次启动时引入了全新的新手引导教程。快速入门教程引导用户通过几个简单的步骤开始使用 Docker。它包含一个简单的练习，用于构建一个示例 Docker 镜像，将其作为容器运行，并将其推送保存到 Docker Hub。
- Docker Desktop 现在允许共享单个文件夹，而不是整个驱动器，使用户对共享内容有更多控制权。

### 升级

- [Docker Compose 1.25.5](https://github.com/docker/compose/releases/tag/1.25.5)
- [Go 1.13.10](https://github.com/golang/go/issues?q=milestone%3AGo1.13.10+label%3ACherryPickApproved)
- [Linux 内核 4.19.76](https://hub.docker.com/layers/docker/for-desktop-kernel/4.19.76-ce15f646db9b062dc947cfc0c1deab019fa63f96-amd64/images/sha256-6c252199aee548e4bdc8457e0a068e7d8e81c2649d4c1e26e4150daa253a85d8?context=repo)
- LinuxKit [init](https://hub.docker.com/layers/linuxkit/init/1a80a9907b35b9a808e7868ffb7b0da29ee64a95/images/sha256-64cc8fa50d63940dbaa9979a13c362c89ecb4439bcb3ab22c40d300b9c0b597e?context=explore)、[runc](https://hub.docker.com/layers/linuxkit/runc/69b4a35eaa22eba4990ee52cccc8f48f6c08ed03/images/sha256-57e3c7cbd96790990cf87d7b0f30f459ea0b6f9768b03b32a89b832b73546280?context=explore) 和 [containerd](https://hub.docker.com/layers/linuxkit/containerd/09553963ed9da626c25cf8acdf6d62ec37645412/images/sha256-866be7edb0598430709f88d0e1c6ed7bfd4a397b5ed220e1f793ee9067255ff1?context=explore)

### 错误修复与微调

**WSL 2**

- 仅在 Windows 端口可用时，Docker Desktop 才会将宿主机端口暴露在 Linux 中。
- Docker Desktop 现在允许用户刷新发行版列表。
- Docker Desktop 在兼容的 OS 版本上安装时默认使用 WSL 2。
- Docker Desktop 可检测缺失的 Linux 内核，并添加指向 Microsoft 文档下载内核的链接。
- 检测 WSL 2 后端何时停止并允许用户重启它。
- 增加了对 WSL 2 绑定挂载进行 `chmod/chown` 的支持。修复了 [docker/for-win#6284](https://github.com/docker/for-win/issues/6284)。
- 增加了对 BIOS 中是否启用虚拟化的检查。

**文件共享 (Filesharing)**

- 修复了重命名共享文件夹的父目录导致虚假的 `File not found` 错误。修复了 [docker/for-win#6200](https://github.com/docker/for-win/issues/6200)。
- 修复了当根文件夹名为一个字母加两位数字时，导致 docker-compose 无法在卷内创建目录的 Bug。修复了 [docker/for-win#6248](https://github.com/docker/for-win/issues/6248)。
- 修复了在负载下且容器重启时，容器无法看到共享卷上的文件更新的 Bug。修复了 [docker/for-win#5530](https://github.com/docker/for-win/issues/5530#issuecomment-608804192)。
- 修复了宿主机路径被错误翻译为虚拟机路径的 Bug。修复了 [docker/for-win#6209](https://github.com/docker/for-win/issues/6209)。
- 修复了在长路径（> 260 字符）上接收文件事件的 Bug。修复了 [docker/for-win#6337](https://github.com/docker/for-win/issues/6337)。
- Docker Desktop 将有效的目录连接（Junctions）呈现为目录（而不是符号链接），并正确处理缓存失效和事件注入。修复了 [docker/for-win#5582](https://github.com/docker/for-win/issues/5582)。

**其他修复**

- 将 Docker Desktop 安装程序的大小从 960 MB 减少到 409 MB。
- 在故障排除（Troubleshoot）屏幕中添加了删除数据的选项。
- 修复了 Kubernetes 上下文无效时容器从 UI 中消失的 Bug。修复了 [docker/for-win#6037](https://github.com/docker/for-win/issues/6037)。
- 修复了将 Windows 事件日志复制到 Docker Desktop 日志文件时的过滤问题。修复了 [docker/for-win#6258](https://github.com/docker/for-win/issues/6258)。
- 修复了 `vpnkit-bridge` 中的句柄泄漏。修复了 [docker/for-win#5841](https://github.com/docker/for-win/issues/5841)。
- 修复了移除 Docker Desktop 虚拟交换机时的 Bug。
- 在 UI 中添加了指向 Edge 频道的链接。
- 使内嵌终端支持调整大小。
- 修复了仅在应用程序重启时才遵循 `expose on TCP` Docker 引擎 API 设置的 Bug。该设置现在将在点击 Apply 按钮时生效。
- 修复了用户名包含空格时诊断信息上传失败的 Bug。
- Docker Desktop 现在在启动时读取 Hyper-V 虚拟机磁盘的最大尺寸，并将其作为设置中显示的值。
- 修复了 Docker Desktop UI 可以在没有引擎的情况下启动的 Bug。修复了 [docker/for-win#5376](https://github.com/docker/for-win/issues/5376)。
- Docker Desktop 现在使用尽可能低的特权来查询 Server 服务。修复了 [docker/for-win#5150](https://github.com/docker/for-win/issues/5150)。
- 修复了容器端口无法在特定宿主机 IP 上公开的问题。参见 [docker/for-win#5546](https://github.com/docker/for-mac/issues/5546)。
- 从控制面板中移除了端口探测，改为直接显示应可用的端口链接。修复了 [docker/for-win#5903](https://github.com/docker/for-win/issues/5903)。
- 从 Docker Desktop 中移除了 Ceph 支持以节省磁盘空间。
- 修复了导致 Windows 日志文件存档无限增长的问题。修复了 [docker/for-win#5113](https://github.com/docker/for-win/issues/5113)。
- 在安装程序中添加了针对 LanmanServer 服务的前置检查。修复了 [docker/for-win#5150](https://github.com/docker/for-win/issues/5150)。

### 已知问题

- 如果您在实验性的 Linux Containers on Windows (LCOW) 模式下运行 Docker Desktop，某些 CLI 命令会失败。作为替代方案，我们建议运行传统的 Linux 容器或使用 [WSL 2 后端](/manuals/desktop/features/wsl/_index.md)。

**WSL 2**

- Swarm 服务绑定挂载并不总是能被正确恢复。
- 当多个容器挂载位于根挂载点之外的文件（如 `/mnt/c`、`/tmp`、`/run...` 下的文件）时，绑定挂载无法正常工作。

## Docker Desktop Community 2.2.0.5
2020-04-02

### 错误修复与微调

- 当宿主机上的文件发生更改时，Docker Desktop 会在 Linux 容器中生成 `fsnotify.WRITE` 事件。修复了 [docker/for-win#5530](https://github.com/docker/for-win/issues/5530#issuecomment-585572414)。
- 修复了在使用 "mfsymlinks" 的共享卷上执行 `readlink` 时的竞态条件。修复了 [docker/for-win#5793](https://github.com/docker/for-win/issues/5793)。
- 提高了虚拟机时间同步的可靠性。参见 [docker/for-win#4526](https://github.com/docker/for-win/issues/4526)。
- 修复了在 `docker-compose.yml` 中使用 `volumes_from` 时共享卷中文件不更新的 Bug。参见 [docker/for-win#5530](https://github.com/docker/for-win/issues/5530)。
- 修复了打开只读文件时报 `Operation not permitted` 错误的 Bug。修复了 [docker/for-win#6016](https://github.com/docker/for-win/issues/6016) 和 [docker/for-win#6017](https://github.com/docker/for-win/issues/6017)。

## Docker Desktop Community 2.2.0.4
2020-03-13

### 升级

- [Docker 19.03.8](https://github.com/docker/docker-ce/releases/tag/v19.03.8)

### 错误修复与微调

- 安全性：诊断信息曾以管理员（Administrator）权限收集，这在 Docker Desktop 用户不是管理员的系统上可能导致权限提升。
- Docker Desktop 现在会在共享卷中显示隐藏文件。修复了 [docker/for-win#5808](https://github.com/docker/for-win/issues/5808)。
- Docker Desktop 现在针对 Windows 文件共享在共享文件系统上生成 inotify `MODIFY` 事件。修复了 [docker/for-win#5530](https://github.com/docker/for-win/issues/5530)。
- 在 Windows 文件系统上尝试在共享卷中创建文件名相同但大小写不同的文件时，现在会失败并提示 `EEXIST` 错误。修复了 [docker/for-win#5894](https://github.com/docker/for-win/issues/5894)。
- 修复了宿主机路径长于 260 字符时共享卷的缓存失效和事件注入问题。
- Docker Desktop 现在允许用户重命名共享卷中已打开的文件。修复了 [docker/for-win#5565](https://github.com/docker/for-win/issues/5565)。
- 修复了导致 Docker Desktop 控制面板尝试连接容器内所有已公开端口的问题。修复了 [docker/for-win#5903](https://github.com/docker/for-win/issues/5903)。
- Kubernetes：由声明（Claims）创建的持久卷现在存储在虚拟机中。修复了 [docker/for-win#5665](https://github.com/docker/for-win/issues/5665)。
- 修复了用户尝试恢复出厂设置时导致 Docker Desktop 挂起的问题。
- 修复了一个导致 Docker Desktop 锁定随机文件的文件共享问题。修复了 [docker/for-win#5624](https://github.com/docker/for-win/issues/5624) 和 [docker/for-win#5575](https://github.com/docker/for-win/issues/5575)。

### 已知问题

- 如果您在实验性的 Linux Containers on Windows (LCOW) 模式下运行 Docker Desktop，某些 CLI 命令会失败。作为替代方案，我们建议运行传统的 Linux 容器或实验性的 [WSL 后端](/manuals/desktop/features/wsl/_index.md)。
- 无法使用 Docker Desktop **Settings** UI 调整磁盘镜像大小。如果您想更新磁盘镜像的大小（例如调至 128 GB），请在 PowerShell 中运行以下命令：

  ```powershell
  Resize-VHD -Path 'C:\ProgramData\DockerDesktop\vm-data\DockerDesktop.vhdx' -SizeBytes 128gb
  ```

## Docker Desktop Community 2.2.0.3
2020-02-11

### 升级

- [Docker Compose 1.25.4](https://github.com/docker/compose/releases/tag/1.25.4)
- [Go 1.13.12](https://golang.org/doc/devel/release.html#go1.13)

### 错误修复与微调

- 修复了用户无法在共享卷内创建文件名包含特殊字符的文件的问题。修复了 [docker/for-win#5520](https://github.com/docker/for-win/issues/5520)。
- 修复了对 `docker-compose.yml` 中带有相对路径的共享卷的处理。修复了 [docker/for-win#5516](https://github.com/docker/for-win/issues/5516)。
- 修复了对共享卷的处理：当路径的大小写与宿主机不完全匹配时。修复了 [docker/for-win#5516](https://github.com/docker/for-win/issues/5516)。
- 修复了在 Windows 文件系统中更改文件但容器内未更新的问题。修复了 [docker/for-win#5530](https://github.com/docker/for-win/issues/5530) 和 [docker/for-win#5550](https://github.com/docker/for-win/issues/5550)。
- 修复了阻止用户共享驱动器并有时错误地提示用户输入文件系统凭据的问题。修复了 [docker/for-win#5567](https://github.com/docker/for-win/issues/5567)。
- 修复了阻止用户挂载嵌套卷的问题。修复了 [docker/for-win#5540](https://github.com/docker/for-win/issues/5540)。
- 修复了绑定挂载上的文件同步问题。修复了 [docker/for-win#5533](https://github.com/docker/for-win/issues/5533)。
- 修复了共享卷内文件的修改时间戳被重置为零的问题。修复了 [docker/for-win#5528](https://github.com/docker/for-win/issues/5528) 和 [docker/for-win#5543](https://github.com/docker/for-win/issues/5543)。
- 修复了在共享长度超过 260 字符的路径时导致 Docker Desktop 失败的 Bug。修复了 [docker/for-win#5572](https://github.com/docker/for-win/issues/5572)。
- 修复了如果共享卷中存在符号链接，部分用户无法启动容器的问题。修复了 [docker/for-win#5582](https://github.com/docker/for-win/issues/5582)。
- 修复了用户无法通过 Docker Desktop UI 修改 **Manual proxy configuration** 设置的 Bug。修复了 [docker/for-win#5606](https://github.com/docker/for-win/issues/5606) 和 [docker/for-win#5548](https://github.com/docker/for-win/issues/5548)。
- 修复了如果 `no_proxy` 环境变量包含以点 (.) 开头的条目时，Docker Desktop UI 无法启动的问题。修复了 [docker/for-win/5551](https://github.com/docker/for-win/issues/5551)。
- 修复了在具有禁止访问 Windows 注册表策略的机器上，用户无法访问 Docker Desktop UI 的 Bug。修复了 [docker/for-win#5536](https://github.com/docker/for-win/issues/5536)。
- 修复了禁用 WSL2 集成后再启用时导致符号链接损坏的问题。修复了 [docker/for-win#5613](https://github.com/docker/for-win/issues/5613)。
- 修复了启动 WSL 引擎时的竞态条件，该条件导致 Docker Desktop 错误报告容器已退出。修复了 [docker/for-win#5607](https://github.com/docker/for-win/issues/5607)。
- 修复了在容器内编辑代码导致报错的问题。修复了 [docker/for-win#5528](https://github.com/docker/for-win/issues/5528)。
- 修复了运行命令 `DockerCli.exe -SharedDrives` 无法显示已共享驱动器列表的 Bug。修复了 [docker/for-win#5625](https://github.com/docker/for-win/issues/5625)。
- 自 Docker Desktop 2.2.0.3 版本起，您必须使用所有共享文件的原始大小写进行访问。例如，如果您创建了一个名为 `test` 的文件，则必须以 `test` 的名称打开。尝试以 `Test` 打开将失败并提示 `No such file or directory`。有关更多信息，请参阅 [文件共享](/manuals/desktop/settings-and-maintenance/settings.md#文件共享) 中的 *共享驱动器、权限和卷挂载的技巧*。

### 已知问题

- DockerNAT 已从 Docker Desktop 2.2.0.0 中移除，因为使用 IP 地址进行从宿主机到容器的通信不再是受支持的功能。要从容器与宿主机通信，您必须使用特殊的 DNS 名称 `host.docker.internal`。我们还建议使用端口进行从宿主机到容器的通信。有关更多信息，请参阅 [网络](/manuals/desktop/features/networking.md#使用场景与变通方法)。

  但是，如果您当前的设置依赖于 IP 地址进行通信，可以使用临时补丁恢复 DockerNAT。为此，打开 `C:\Program Files\Docker\Docker\resources\MobyLinux.ps1`，并在第 175 行和 176 行之间添加 `$SwitchName = "DockerNAT"`。请注意，恢复 DockerNAT 的临时补丁可能会在未来的版本中移除。
- 共享卷中指向共享卷外部的目录连接（Junctions）无法工作。
- 目前无法重命名共享卷中已打开的文件。
- 在某些情况下，当宿主机进入睡眠状态时，Docker 容器不会与宿主机同步时间。
- 无法在代理设置中使用 `localhost`。您可以改用 `host.docker.internal` 来解决此问题。

## Docker Desktop Community 2.2.0.0
2020-01-21

Docker Desktop 2.2.0.0 包含 Kubernetes 升级。安装此版本后，您的本地 Kubernetes 集群将被重置。

### 升级

- [Docker Compose 1.25.2](https://github.com/docker/compose/releases/tag/1.25.2)
- [Kubernetes 1.15.5](https://github.com/kubernetes/kubernetes/releases/tag/v1.15.5)
- Linux 内核 4.19.76
- [QEMU 4.0.1](https://github.com/docker/binfmt)

### 新特性

- **Docker Desktop 控制面板 (Dashboard)**：全新的 Docker Desktop **控制面板** 提供了一个用户友好的界面，使您能够与容器和应用程序交互，并直接从 UI 管理应用程序的生命周期。此外，它还允许您访问日志、查看容器详情以及监控资源利用率，以探索容器行为。有关新控制面板 UI 的详细信息，请参阅 [Docker Desktop 控制面板](../_index.md)。

- **WSL 2 后端**：实验性的 Docker Desktop WSL 2 后端架构引入了对 Kubernetes 的支持，提供更新的 Docker 守护进程，提供 VPN 友好的网络以及其他功能。有关更多信息，请参阅 [Docker Desktop WSL 2 后端](/manuals/desktop/features/wsl/_index.md)。

- **全新的文件共享实现**：Docker Desktop 引入了一种新的文件共享实现，取代了 Samba、CIFS 和 Hyper-V 网络。新实现提供了更好的 I/O 性能。此外，当使用新文件系统时：

  - 用户无需公开 Samba 端口，因此不会遇到与 IT 防火墙或驱动器共享策略相关的问题。
  - 无需向 Docker Desktop 提供用户凭据。通过容器访问挂载文件夹时，会自动强制执行文件访问权限。

    有关更多信息，请参阅博客文章 [Windows 版 Docker Desktop 中的新文件共享实现](https://www.docker.com/blog/new-filesharing-implementation-in-docker-desktop-windows/)。

- 在 **Settings** > **Resources** 中添加了 **WSL Integration** 选项，用于选择 WSL 2 发行版。仅在机器上启用 WSL 2 后，此选项才可见。
- 为 Docker Desktop **Settings** 菜单引入了全新的用户界面。
- 重启（Restart）、重置（Reset）和卸载（Uninstall）选项现在可在 **Troubleshoot** 菜单中找到。
- 增加了在 Docker Desktop **控制面板** UI 中启动和停止现有 Compose 应用程序以及查看合并日志的能力。

### 错误修复与微调

- 在安装期间启用了 Hyper-V 和 Containers 等 Windows 功能，从而减少了安装后再次重启的需求。
- 在 Docker API 代理中增加了对 `Expect: 100-continue` 请求头的支持。某些 HTTP 客户端（如 `curl`）在负载较大时（例如创建容器时）会发送此请求头。修复了 [moby/moby#39693](https://github.com/moby/moby/issues/39693)。
- 在 **Settings** 和 **Troubleshoot** 窗口中增加了加载覆盖层，以防止编辑冲突。
- 当 Kubernetes 未激活时，禁用了 **Reset Kubernetes** 按钮。
- 改进了 **Settings** 和 **Troubleshoot** UI 的导航体验。
- Docker Machine 不再包含在 Docker Desktop 安装程序中。您可以从 [Docker Machine 发布页面](https://github.com/docker/machine/releases) 单独下载。
- Docker Desktop 现在在更新后会自动重启。
- 修复了部分机器上 Docker Desktop 自动启动未被正确禁用的问题。
- 修复了当容器拥有多个具有任意或尚未配置的外部端口号的端口时，容器启动出错的问题。例如：`docker run -p 80 -p 443 nginx`。修复了 [docker/for-win#4935](https://github.com/docker/for-win/issues/4935) 和 [docker/compose#6998](https://github.com/docker/compose/issues/6998)。
- 修复了在运行 Windows 容器时恢复出厂设置导致的 Docker Desktop 崩溃。
- 修复了多个与“快速启动 (Fast Startup)”相关的问题。
- Docker Desktop 现在在共享文件系统上支持 `inotify` 事件。
- Docker Desktop 的启动现在更加可靠，且不会与宿主机防火墙软件发生冲突。
- 修复了一个罕见的问题，该问题曾导致 Docker Desktop 崩溃并提示错误 `Unable to stop Hyper-V VM: Cannot validate argument on parameter 'SwitchName'. The argument is null or empty.`
- 修复了卸载 Docker Desktop 时发生的一个罕见崩溃。
- 修复了因 Kubernetes 配置文件不完整导致 Docker Desktop 启动失败的问题。
- 修复了各种稳定性问题。

### 已知问题

- 当您启动一个 Docker Compose 应用程序，然后启动一个与该 Compose 应用程序同名的 Docker App 时，Docker Desktop 在控制面板上仅显示一个应用程序。但当您展开该应用程序时，属于这两个应用程序的容器都会显示在控制面板上。
- 当您在 Kubernetes 上部署一个包含多个容器的 Docker App 时，Docker Desktop 会在控制面板上将每个 Pod 显示为一个应用程序。
- WSL 2 需要 Windows 10 Insider Preview 内部版本 19018 或更高。
- 当您在 Linux 和 Windows 容器模式之间切换时，控制面板会停止更新。要解决此问题，请关闭并重新打开控制面板。
- 新的 gRPC FUSE 文件共享实现不支持连接到在 Docker Desktop 启动后添加的新驱动器（例如 USB 驱动器）。如果您想在 Docker Desktop 中共享新驱动器，必须退出并重新启动 Docker Desktop，以刷新设置中的驱动器列表。
- 无法共享来自 `ImDisk Toolkit` 创建的虚拟驱动器的文件。

## Docker Desktop Community 2.1.0.5
2019-11-18

Docker Desktop 2.1.0.5 包含 Kubernetes 升级。请注意，安装此版本后，您的本地 Kubernetes 集群将被重置。

### 升级

- [Docker 19.03.5](https://github.com/docker/docker-ce/releases/tag/v19.03.5)
- [Kubernetes 1.14.8](https://github.com/kubernetes/kubernetes/releases/tag/v1.14.8)
- [Go 1.12.13](https://golang.org/doc/devel/release.html#go1.12)

## Docker Desktop Community 2.1.0.4
2019-10-21

Docker Desktop 2.1.0.4 包含 Kubernetes 升级。请注意，安装此版本后，您的本地 Kubernetes 集群将被重置。

### 升级

- [Docker 19.03.4](https://github.com/docker/docker-ce/releases/tag/v19.03.4)
- [Kubernetes 1.14.7](https://github.com/kubernetes/kubernetes/releases/tag/v1.14.7)
- [Go 1.12.10](https://github.com/golang/go/issues?q=milestone%3AGo1.12.10+label%3ACherryPickApproved)
- [Kitematic 0.17.9](https://github.com/docker/kitematic/releases/tag/v0.17.9)

### 新特性

Docker Desktop 现在支持使用双重身份验证（2FA）登录 Docker Hub。

## Docker Desktop Community 2.1.0.3
2019-09-16

### 升级

- [Kitematic 0.17.8](https://github.com/docker/kitematic/releases/tag/v0.17.8)

## Docker Desktop Community 2.1.0.2
2019-09-04

Docker Desktop 2.1.0.2 包含 Kubernetes 升级。安装此版本后，您的本地 Kubernetes 集群将被重置。

### 升级

- [Docker 19.03.2](https://github.com/docker/docker-ce/releases/tag/v19.03.2)
- [Kubernetes 1.14.6](https://github.com/kubernetes/kubernetes/releases/tag/v1.14.6)
- [Go 1.12.9](https://github.com/golang/go/issues?q=milestone%3AGo1.12.9+label%3ACherryPickApproved)
- [Docker Machine 0.16.2](https://github.com/docker/machine/releases/tag/v0.16.2)

## Docker Desktop Community 2.1.0.1
2019-08-08

请注意，您必须登录并创建 Docker ID 才能下载 Docker Desktop。

### 升级

* [Docker 19.03.1](https://github.com/docker/docker-ce/releases/tag/v19.03.1)
* [Docker Compose 1.24.1](https://github.com/docker/compose/releases/tag/1.24.1)
* [Kubernetes 1.14.3](https://github.com/kubernetes/kubernetes/releases/tag/v1.14.3)
* [Compose on Kubernetes 0.4.23](https://github.com/docker/compose-on-kubernetes/releases/tag/v0.4.23)
* [Docker Machine 0.16.1](https://github.com/docker/machine/releases/tag/v0.16.1)
* [linuxkit v0.7](https://github.com/linuxkit/linuxkit/releases/tag/v0.7)
* Linux 内核 4.9.184
* [Kitematic 0.17.6](https://github.com/docker/kitematic/releases/tag/v0.17.6)
* 针对 ARM 交叉编译的 [Qemu 4.0.0](https://github.com/docker/binfmt)
* [Alpine 3.10](https://alpinelinux.org/posts/Alpine-3.10.0-released.html)
* [Docker Credential Helpers 0.6.3](https://github.com/docker/docker-credential-helpers/releases/tag/v0.6.3)

### 新特性

* 勾选 Daemon **Settings** 菜单中的 ‘Experimental features’ 复选框将开启 Docker 守护进程和 Docker CLI 的实验性功能。
* Docker Desktop 现在会在启动时检查存储的凭据，然后再尝试挂载任何共享驱动器。这会提示用户在凭据无效时重新输入。

### 实验性功能

> 实验性功能提供了对未来产品功能的早期体验。这些功能仅用于测试和反馈，可能会在不同版本之间发生变化且不另行通知，或者在未来的版本中被完全移除。实验性功能不得用于生产环境。Docker 不为实验性功能提供支持。

Docker Desktop Community 2.1.0.0 包含以下实验性功能：

* Docker App：Docker App 是一个 CLI 插件，可帮助配置、分享和安装应用程序。
* Docker Buildx：Docker Buildx 是一个 CLI 插件，通过 BuildKit 扩展构建能力。有关更多信息，请参阅 [构建页面](/manuals/build/_index.md)。

### 错误修复与微调

* 修复了 PowerShell 脚本签名问题，该问题曾在对 PowerShell 脚本签名有严格组策略的机器上导致 `AuthorizationManager check failed` 错误。[docker/for-win#4376](https://github.com/docker/for-win/issues/4376)
* 修复了用户在升级到 2.1.0.0 版本后无法启动 Docker Desktop 的问题。[docker/for-win#4390](https://github.com/docker/for-win/issues/4390)
* 修复了尝试升级 Docker Desktop 到 2.1.0.0 版本时有时会报错 `value cannot be null` 的问题。[docker/for-win#4343](https://github.com/docker/for-win/issues/4343)
* 修复了在升级 Docker Desktop 到 2.1.0.0 版本时导致安装程序挂起的问题。[docker/for-win#4387](https://github.com/docker/for-win/issues/4387)
* 改进了虚拟机生命周期操作期间显示的错误消息。[docker/for-win#4348](https://github.com/docker/for-win/issues/4348)
* Docker Desktop 现在支持为较慢机器上的虚拟机配置用户超时时间。[docker/for-win#4393](https://github.com/docker/for-win/issues/4393)
* 将本地 Kubernetes 集群上的 `cluster-admin` 角色限制为 `kube-system` 命名空间。
* 缩短了虚拟机启动时间。交换空间（swap）不再在每次虚拟机启动时创建。
* 修复了当用户使用 Windows 用户帐户控制 (UAC) 设置取消切换版本时导致 Windows 崩溃的 Bug。
* 修复了当用户注销并重新登录 Windows 时 Docker Desktop 重启的问题，该修复保留了容器上导出的端口。
* 修复了配合 VPNkit 子网时的 Kubernetes 安装问题。
* 修复了在 Windows 上收集诊断信息时，进程输出未重定向到标准输出（stdout）的 Bug，该 Bug 有时导致崩溃。
* 修复了在应用重启后 Kubernetes 有时无法启动的竞态条件。
* 系统托盘图标现在可以通过鼠标左键和右键打开 Docker Desktop 菜单。
* 在显示崩溃报告窗口时，Docker Desktop 不会发送 Bugsnag 崩溃报告，除非用户需要该报告来上传诊断信息。
* Docker Desktop 移除了使用电子邮件地址作为用户名进行登录的能力，因为 Docker 命令行不支持此操作。
* 对于 Windows 上的 Linux 容器 (LCOW)，宿主机必须运行 Windows 10 专业版或 Windows 10 企业版 1809 或更高版本。
* **Send usage statistics** 复选框在 Windows 社区版 Docker Desktop 中默认勾选。此选项无法修改。
* Docker Desktop 在启动期间新增了一个对话框，允许用户在尝试失败后重试挂载共享驱动器，或将其从共享驱动器列表中移除。
* 修复了 Windows 上 Kubernetes 的持久卷声明删除操作。
* Docker Desktop 现在会截断大小超过 512 字节的 UDP DNS 响应。
* 修复了在某些情况下安装后 Docker 未被添加到 PATH 的 Bug。
* 修复了启动 Kubernetes 时 localhost 上被占用的 8080 端口。
* 将产品名称从 **Docker for Windows** 更改为 **Docker Desktop**。
* 修复了诊断窗口中的 **Create issue** 链接。
* 修复了诊断中服务日志收集相关的 Bug。
* Docker Desktop 现在会收集 `/etc/hosts` 以协助诊断。
* 添加了 Docker Engine 18.09 中缺失的守护进程选项。
* 当两个服务具有共同的公开端口时，Docker Desktop 会公开第二个服务的可用端口。
* 修复了更改 Kubernetes 状态时的 UI 锁定问题。

### Docker Community Edition 2.0.0.3 2019-02-15

* 升级
  - [Docker 18.09.2](https://github.com/docker/docker-ce/releases/tag/v18.09.2)，修复了 [CVE-2019-5736](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-5736)。

* 错误修复
  - 修复了 Hub 登录失败或处于物理隔离模式时系统托盘菜单的崩溃问题。

### Docker Community Edition 2.0.0.2 2019-01-16

* 升级
  - [Docker 18.09.1](https://github.com/docker/docker-ce/releases/tag/v18.09.1)
  - [Docker Machine 0.16.1](https://github.com/docker/machine/releases/tag/v0.16.1)
  - [Kubernetes 1.10.11](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG-1.10.md#v11011)，修复了 [CVE-2018-1002105](https://github.com/kubernetes/kubernetes/issues/71411)。
  - [Kitematic 0.17.6](https://github.com/docker/kitematic/releases/tag/v0.17.6)
  - Golang 1.10.6，修复了以下 CVE：[CVE-2018-16875](https://www.cvedetails.com/cve/CVE-2018-16875)、[CVE-2018-16873](https://www.cvedetails.com/cve/CVE-2018-16873) 和 [CVE-2018-16874](https://www.cvedetails.com/cve/CVE-2018-16874)。
  - Windows 14393 已标记为弃用；在下一个主要稳定版本 (2.1.0.0 及以后) 中将不再支持。

* 错误修复与微调
  - 将 Docker for Windows 重命名为 Docker Desktop
  - 添加了 18.09 缺失的守护进程选项

### Docker Community Edition 2.0.0.0-win81 2018-12-07

* 升级
  - [Docker compose 1.23.2](https://github.com/docker/compose/releases/tag/1.23.2)

* 错误修复与微调
  - Compose：修复了在 Windows 上构建上下文 URL 无法构建的 Bug。修复了 [docker/for-win#2918](https://github.com/docker/for-win/issues/2918)。

### Docker Community Edition 2.0.0.0-win78 2018-11-19

* 升级
  - [Docker 18.09.0](https://github.com/docker/docker-ce-packaging/releases/tag/v18.09.0)
  - [Docker compose 1.23.1](https://github.com/docker/compose/releases/tag/1.23.1)
  - [Docker Machine 0.16.0](https://github.com/docker/machine/releases/tag/v0.16.0)
  - [Kitematic 0.17.5](https://github.com/docker/kitematic/releases/tag/v0.17.5)
  - Linux 内核 4.9.125

* 新特性
  - 新的版本命名方案

* 弃用
  - 移除了对 AUFS 的支持

* 错误修复与微调
  - Windows 容器：修复了组守护进程选项设置。修复了 [docker/for-win#2647](https://github.com/docker/for-win/issues/2647)。
  - Windows 容器：更好地解析 host.docker.internal，未修改时不重写。源自 [docker/for-win#1976](https://github.com/docker/for-win/issues/1976)。
  - 使用 Windows 容器时不再尝试更新 Samba 共享挂载。
  - 改进了日志中过于繁杂的 DNS 更新信息。
  - VPNKit：改进了端口转发的可扩展性。
  - VPNKit：限制了 UDP NAT 表的大小。这确保了即使在运行非常繁杂的 UDP 协议时，端口转发和常规 TCP 流量也能继续进行。
  - LCOW 在多架构镜像上不再需要 --platform 标志。
  - 磁盘大小现在可以从 32GiB 调整到驱动器可用空间大小。
  - 修复了日志中过于繁杂的 DNS 更新信息。
  - 修复了诊断程序中的 panic。
