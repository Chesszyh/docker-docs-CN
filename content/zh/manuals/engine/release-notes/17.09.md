---
title: Docker Engine 17.09 发布说明
linkTitle: Engine v17.09
toc_min: 1
toc_max: 2
---

## 17.09.1-ce
2017-12-07

### 构建器

- 修复共享父阶段上的配置泄漏 [moby/moby#33753](https://github.com/moby/moby/issues/33753)
- 仅对空的续行发出警告，而不是仅有注释的行 [moby/moby#35004](https://github.com/moby/moby/pull/35004)

### 客户端

- 即使 Ping 失败也在客户端上设置 API 版本 [docker/cli#546](https://github.com/docker/cli/pull/546)

### 网络

- Overlay 修复瞬时 IP 重用问题 [docker/libnetwork#2016](https://github.com/docker/libnetwork/pull/2016)
- 修复 NetworkDB 中的 reapTime 逻辑并处理可附加容器的 DNS 清理 [docker/libnetwork#2017](https://github.com/docker/libnetwork/pull/2017)
- 在链存在性检查时禁用主机名查找 [docker/libnetwork#2019](https://github.com/docker/libnetwork/pull/2019)
- 修复 lint 问题 [docker/libnetwork#2020](https://github.com/docker/libnetwork/pull/2020)
- 恢复 FindNetwork 中的错误类型 [moby/moby#35634](https://github.com/moby/moby/pull/35634)

### 运行时

- 保护 `health monitor` Go 通道 [moby/moby#35482](https://github.com/moby/moby/pull/35482)
- 修复泄漏的容器/exec 状态 [moby/moby#35484](https://github.com/moby/moby/pull/35484)
- 将 /proc/scsi 添加到屏蔽路径（用于解决 [CVE-2017-16539](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-16539) 的补丁）[moby/moby/#35399](https://github.com/moby/moby/pull/35399)
- 更新 tar-split 供应商：修复可能导致 Docker 守护进程崩溃的内存耗尽问题 [moby/moby/#35424](https://github.com/moby/moby/pull/35424) 修复 [CVE-2017-14992](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-14992)
- 修复 P/Z HubPullSuite 测试 [moby/moby#34837](https://github.com/moby/moby/pull/34837)
+ Windows：添加对拉取时版本过滤的支持 [moby/moby#35090](https://github.com/moby/moby/pull/35090)
- Windows：停止按版本过滤 Windows 清单列表 [moby/moby#35117](https://github.com/moby/moby/pull/35117)
- 在 chroot 归档中使用 rslave 而不是 rprivate [moby/moby/#35217](https://github.com/moby/moby/pull/35217)
- 卸载后移除容器 rootfs mountPath [moby/moby#34573](https://github.com/moby/moby/pull/34573)
- 修复遵守用户 /dev/shm 挂载的 tmpfs 大小 [moby/moby#35316](https://github.com/moby/moby/pull/35316)
- 设置 may_detach_mounts 时不中止（改为记录错误）[moby/moby#35172](https://github.com/moby/moby/pull/35172)
- 修复协商 API 版本时的版本比较 [moby/moby#35008](https://github.com/moby/moby/pull/35008)

### Swarm 模式

* 发送快照时增加 gRPC 请求超时 [docker/swarmkit#2404](https://github.com/docker/swarmkit/pull/2404)
- 修复没有日志驱动程序时的节点过滤 [docker/swarmkit#2442](https://github.com/docker/swarmkit/pull/2442)
- 尝试更改集群名称时添加错误 [docker/swarmkit/#2454](https://github.com/docker/swarmkit/pull/2454)
- 移除节点时删除节点附件 [docker/swarmkit/#2456](https://github.com/docker/swarmkit/pull/2456)
- 提供自定义 gRPC dialer 以覆盖默认代理 dialer [docker/swarmkit/#2457](https://github.com/docker/swarmkit/pull/2457)
- 避免 swarm info 上的递归读锁 [moby/moby#35388](https://github.com/moby/moby/pull/35388)

## 17.09.0-ce
2017-09-26

### 构建器

+ 为 Dockerfile 中的 `ADD/COPY` 命令添加 `--chown` 标志 [moby/moby#34263](https://github.com/moby/moby/pull/34263)
* 修复从 git 仓库构建时克隆不需要的文件 [moby/moby#33704](https://github.com/moby/moby/pull/33704)

### 客户端

* 允许在 compose 格式 v3.4 版本中使用扩展字段 [docker/cli#452](https://github.com/docker/cli/pull/452)
* 使 compose 文件允许为非外部卷指定名称 [docker/cli#306](https://github.com/docker/cli/pull/306)
* 支持 `--compose-file -` 作为标准输入 [docker/cli#347](https://github.com/docker/cli/pull/347)
* 在 Docker Compose 中支持健康检查的 `start_period` [docker/cli#475](https://github.com/docker/cli/pull/475)
+ 在 docker stack 命令中添加对 `stop-signal` 的支持 [docker/cli#388](https://github.com/docker/cli/pull/388)
+ 在 compose 部署中添加对更新顺序的支持 [docker/cli#360](https://github.com/docker/cli/pull/360)
+ 将 ulimits 添加到不支持的 compose 字段 [docker/cli#482](https://github.com/docker/cli/pull/482)
+ 为 `docker-search` 添加 `--format` [docker/cli#440](https://github.com/docker/cli/pull/440)
* 当格式中有 `{{.Digest}}` 时显示镜像摘要 [docker/cli#439](https://github.com/docker/cli/pull/439)
* 将 `docker stack rm` 的输出打印到 `stdout` 而不是 `stderr` [docker/cli#491](https://github.com/docker/cli/pull/491)
- 修复 `--human=true` 时 `docker history --format {{json .}}` 打印人类可读时间戳而不是 ISO8601 的问题 [docker/cli#438](https://github.com/docker/cli/pull/438)
- 修复使用 secrets 或 configs 时 `docker stack deploy` 的幂等性问题 [docker/cli#509](https://github.com/docker/cli/pull/509)
- 修复随机主机端口的显示 [docker/cli#404](https://github.com/docker/cli/pull/404)
- 修复使用多个 secrets 创建服务时冗余的服务重启问题 [moby/moby#34746](https://github.com/moby/moby/issues/34746)

### 日志

- 修复当标签为空且使用 raw-mode 时 Splunk logger 不传输日志数据的问题 [moby/moby#34520](https://github.com/moby/moby/pull/34520)

### 网络

+ 在守护进程配置中添加控制平面 MTU 选项 [moby/moby#34103](https://github.com/moby/moby/pull/34103)
+ 将服务虚拟 IP 添加到沙箱的环回地址 [docker/libnetwork#1877](https://github.com/docker/libnetwork/pull/1877)

### 运行时

* Graphdriver：将 overlay2 提升优先于 aufs [moby/moby#34430](https://github.com/moby/moby/pull/34430)
* LCOW：VHD 启动的附加标志 [moby/moby#34451](https://github.com/moby/moby/pull/34451)
* LCOW：不阻塞导出 [moby/moby#34448](https://github.com/moby/moby/pull/34448)
* LCOW：动态沙箱管理 [moby/moby#34170](https://github.com/moby/moby/pull/34170)
* LCOW：强制 Hyper-V 隔离 [moby/moby#34468](https://github.com/moby/moby/pull/34468)
* LCOW：将 toolsScratchPath 移至 /tmp [moby/moby#34396](https://github.com/moby/moby/pull/34396)
* LCOW：移除硬编码 [moby/moby#34398](https://github.com/moby/moby/pull/34398)
* LCOW：WORKDIR 正确处理 [moby/moby#34405](https://github.com/moby/moby/pull/34405)
* Windows：命名管道挂载 [moby/moby#33852](https://github.com/moby/moby/pull/33852)
- 修复在 SELinux 强制模式下访问卷时的"permission denied"错误 [moby/moby#34684](https://github.com/moby/moby/pull/34684)
- 修复 `docker system df` 中层大小报告为 `0` 的问题 [moby/moby#34826](https://github.com/moby/moby/pull/34826)
- 修复基于 RHEL 7.4 内核上移除容器时的一些"device or resource busy"错误 [moby/moby#34886](https://github.com/moby/moby/pull/34886)

### Swarm 模式

* 将 swarm 中的管理器是否自动锁定作为 `docker info` 的一部分包含 [docker/cli#471](https://github.com/docker/cli/pull/471)
+ 添加 'docker service rollback' 子命令 [docker/cli#205](https://github.com/docker/cli/pull/205)
- 修复当 gRPC 快照大于 4MB 时管理器无法加入的问题 [docker/swarmkit#2375](https://github.com/docker/swarmkit/pull/2375)
- 修复启用 SELinux 的容器中配置文件的"permission denied"错误 [moby/moby#34732](https://github.com/moby/moby/pull/34732)
- 修复服务在 ARM 节点上无法部署的问题 [moby/moby#34021](https://github.com/moby/moby/pull/34021)

### 打包

+ Ubuntu 上 ppc64el 的构建脚本 [docker/docker-ce-packaging#43](https://github.com/docker/docker-ce-packaging/pull/43)

### 弃用

+ 移除已弃用的 `--enable-api-cors` 守护进程标志 [moby/moby#34821](https://github.com/moby/moby/pull/34821)
