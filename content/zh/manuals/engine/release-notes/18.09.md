---
title: Docker Engine 18.09 发行说明
linkTitle: Engine v18.09
toc_min: 1
toc_max: 2
---

> **注意：**
>
> 在此版本中，daemon、client 和 container runtime 现在都在单独的包中发布。更新时，您需要同时更新所有包以获取每个组件的最新补丁版本。例如，在 Ubuntu 上：
>
> ```console
> $ sudo apt-get install docker-ce docker-ce-cli containerd.io
> ```
>
> 有关详细信息，请参阅相应 Linux 发行版的[安装说明](../install/_index.md)。

## 18.09.9
2019-09-03

### 客户端（Client）

* 修复非 Windows 系统上的 Windows 绝对路径检测。[docker/cli#1990](https://github.com/docker/cli/pull/1990)
* 修复 Windows 上 Docker 拒绝从 delegation.key 加载密钥的问题。[docker/cli#1968](https://github.com/docker/cli/pull/1968)
* bash 和 zsh 补全脚本更新。

### 日志（Logging）

* 修复读取 journald 日志的问题。[moby/moby#37819](https://github.com/moby/moby/pull/37819) [moby/moby#38859](https://github.com/moby/moby/pull/38859)

### 网络（Networking）

* 防止在附加到禁用网络的容器的网络上发生 panic。[moby/moby#39589](https://github.com/moby/moby/pull/39589)
* 修复应用程序的服务端口随机变得不可用的问题。[docker/libnetwork#2069](https://github.com/docker/libnetwork/pull/2069)
* 修复在 `--config-from` 网络已非正常退出时清理 `--config-only` 网络的问题。[docker/libnetwork#2373](https://github.com/docker/libnetwork/pull/2373)

### 运行时（Runtime）

* 更新到 Go 1.11.13。
* 修复使用 XFS 磁盘配额用于容器时的潜在引擎 panic。[moby/moby#39644](https://github.com/moby/moby/pull/39644)

### Swarm

* 修复 "grpc: received message larger than max" 错误。[moby/moby#39306](https://github.com/moby/moby/pull/39306)
* 修复某些节点无法删除多个任务的问题。[docker/swarmkit#2867](https://github.com/docker/swarmkit/pull/2867)

## 18.09.8
2019-07-17

### 运行时（Runtime）

* 在 debug 模式下运行 Docker Engine 时，屏蔽更新到日志文件的 secrets。[CVE-2019-13509](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-13509)：如果 Docker engine 在 debug 模式下运行，并且使用 `docker stack deploy` 重新部署包含非外部 secrets 的 stack，日志将包含该 secret。


### 客户端（Client）

* 修复 `parallelism` 和 `max_failure_ratio` 字段的回滚配置类型插值。

### 已知问题

* 升级过程中有重要更改，如果未正确遵循，可能会影响升级期间 Swarm 上运行的应用程序的可用性。这些限制影响从 18.09 之前的任何版本升级到 18.09 或更高版本。

## 18.09.7
2019-06-27

### 构建器（Builder）

* 修复构建仅包含注释的 dockerfile 时的 panic 错误。[moby/moby#38487](https://github.com/moby/moby/pull/38487)
* 添加 GCR 身份验证问题的解决方法。[moby/moby#38246](https://github.com/moby/moby/pull/38246)
* Builder-next：修复 GCR token 缓存实现解决方法中的 bug。[moby/moby#39183](https://github.com/moby/moby/pull/39183)

### 网络（Networking）
*  修复 `--network-rm` 无法删除网络的错误。[moby/moby#39174](https://github.com/moby/moby/pull/39174)

### 运行时（Runtime）

* 在 aufs 和 layer store 中添加性能优化，有助于大规模并行创建和删除容器。[moby/moby#39107](https://github.com/moby/moby/pull/39107)、[moby/moby#39135](https://github.com/moby/moby/pull/39135)
* 将 containerd 更新到版本 1.2.6。[moby/moby#39016](https://github.com/moby/moby/pull/39016)
* 修复 [CVE-2018-15664](https://nvd.nist.gov/vuln/detail/CVE-2018-15664) 符号链接交换攻击与目录遍历。[moby/moby#39357](https://github.com/moby/moby/pull/39357)
* Windows：修复 `docker service create --limit-cpu` 的支持。[moby/moby#39190](https://github.com/moby/moby/pull/39190)
* daemon：修复 mirrors 验证问题。[moby/moby#38991](https://github.com/moby/moby/pull/38991)
* Docker 不再支持在 ID 映射中对 UID 和 GID 范围进行排序。[moby/moby#39288](https://github.com/moby/moby/pull/39288)

### 日志（Logging）

* 添加修复，现在允许 logger 插件使用大日志行。[moby/moby#39038](https://github.com/moby/moby/pull/39038)

### 已知问题
* 升级过程中有重要更改，如果未正确遵循，可能会影响升级期间 Swarm 上运行的应用程序的可用性。这些限制影响从 18.09 之前的任何版本升级到 18.09 或更高版本。

## 18.09.6
2019-05-06

### 构建器（Builder）
* 如果 `DOCKER_BUILDKIT=1`，修复 `COPY` 和 `ADD` 使用多个 `<src>` 时不会使缓存失效的问题。[moby/moby#38964](https://github.com/moby/moby/issues/38964)

### 网络（Networking）
* 在 agent 关闭时清理 cluster provider。[docker/libnetwork#2354](https://github.com/docker/libnetwork/pull/2354)
* Windows：如果用户未指定主机端口，现在会选择一个随机主机端口。[docker/libnetwork#2369](https://github.com/docker/libnetwork/pull/2369)

### 已知问题
* 升级过程中有重要更改，如果未正确遵循，可能会影响升级期间 Swarm 上运行的应用程序的可用性。这些限制影响从 18.09 之前的任何版本升级到 18.09 或更高版本。

## 18.09.5

2019-04-11

### 构建器（Builder）

* 修复 `DOCKER_BUILDKIT=1 docker build --squash ..` [docker/engine#176](https://github.com/docker/engine/pull/176)

### 客户端（Client）

* 修复 tty 初始大小错误。[docker/cli#1775](https://github.com/docker/cli/pull/1775)
* 修复 dial-stdio goroutine 泄漏。[docker/cli#1795](https://github.com/docker/cli/pull/1795)
* 修复用于跟踪部署的 stack informer 选择器。[docker/cli#1794](https://github.com/docker/cli/pull/1794)

### 网络（Networking）

* 修复 `network=host` 使用 `systemd-resolved` 时使用错误的 `resolv.conf`。[docker/engine#180](https://github.com/docker/engine/pull/180)
* 修复 Windows ARP 条目在负载下随机损坏的问题。[docker/engine#192](https://github.com/docker/engine/pull/192)

### 运行时（Runtime）
* 现在将具有重启策略的已停止容器显示为 `Restarting`。[docker/engine#181](https://github.com/docker/engine/pull/181)
* 现在对 exec 使用原始进程规范。[docker/engine#178](https://github.com/docker/engine/pull/178)

### Swarm 模式

* 修复删除节点时任务资源泄漏的问题。[docker/engine#185](https://github.com/docker/engine/pull/185)

### 已知问题

* 升级过程中有重要更改，如果未正确遵循，可能会影响升级期间 Swarm 上运行的应用程序的可用性。这些限制影响从 18.09 之前的任何版本升级到 18.09 或更高版本。

## 18.09.4

 2019-03-28

### 构建器（Builder）

* 通过添加 `git ref` 验证来修复 [CVE-2019-13139](https://nvd.nist.gov/vuln/detail/CVE-2019-13139)，以避免被误解为标志。[moby/moby#38944](https://github.com/moby/moby/pull/38944)

### 运行时（Runtime）

* 修复文件名超过 100 个字符时的 `docker cp` 错误。[moby/moby#38634](https://github.com/moby/moby/pull/38634)
* 修复 `layer/layer_store` 以确保释放 `NewInputTarStream` 资源。[moby/moby#38413](https://github.com/moby/moby/pull/38413)
* 增加 `GetConfigs` 的 GRPC 限制。[moby/moby#38800](https://github.com/moby/moby/pull/38800)
* 更新 `containerd` 1.2.5。[docker/engine#173](https://github.com/docker/engine/pull/173)

### Swarm 模式
* 修复加入 swarm 节点时的空指针异常。[moby/moby#38618](https://github.com/moby/moby/issues/38618)
* 修复设置 http 代理时 swarm 节点无法作为 master 加入的问题。[moby/moby#36951]

### 已知问题
* 升级过程中有重要更改，如果未正确遵循，可能会影响升级期间 Swarm 上运行的应用程序的可用性。这些限制影响从 18.09 之前的任何版本升级到 18.09 或更高版本。

## 18.09.3

2019-02-28

### 网络修复
* Windows：现在避免重新生成网络 ID 以防止对网络的损坏引用。[docker/engine#149](https://github.com/docker/engine/pull/149)
* Windows：修复了在指定网络时独立容器上的 `- restart always` 标志不工作的问题。(docker/escalation#1037)
* 修复了如果 manager 未附加到 overlay 网络时从 networkdb 获取 IPAM 状态的问题。(docker/escalation#1049)

### 运行时修复和更新

* 更新到 Go 版本 1.10.8。
* 修改容器名称生成器中的名称。[docker/engine#159](https://github.com/docker/engine/pull/159)
* 复制现有文件夹时，当目标文件系统不支持 xattr 时，xattr 设置错误现在会被忽略。[docker/engine#135](https://github.com/docker/engine/pull/135)
* Graphdriver：修复如果设置了 "character-device" 位则无法检测到 "device" 模式的问题。[docker/engine#160](https://github.com/docker/engine/pull/160)
* 修复连接到 containerd 失败时的空指针解引用。[docker/engine#162](https://github.com/docker/engine/pull/162)
* 在启动失败时删除过期的 containerd 对象。[docker/engine#154](https://github.com/docker/engine/pull/154)

### 已知问题
* 升级过程中有重要更改，如果未正确遵循，可能会影响升级期间 Swarm 上运行的应用程序的可用性。这些限制影响从 18.09 之前的任何版本升级到 18.09 或更高版本。

## 18.09.2

2019-02-11

### 安全修复
* 更新 `runc` 以修复一个关键漏洞，该漏洞允许经过特殊构造的容器获取主机的管理员权限。[CVE-2019-5736](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-5736)
* 使用 3.13 内核的 Ubuntu 14.04 用户需要升级到受支持的 Ubuntu 4.x 内核

有关更多信息，[请参阅 Docker 博客文章](https://blog.docker.com/2019/02/docker-security-update-cve-2018-5736-and-container-security-best-practices/)。

### 已知问题
* 升级过程中有重要更改，如果未正确遵循，可能会影响升级期间 Swarm 上运行的应用程序的可用性。这些限制影响从 18.09 之前的任何版本升级到 18.09 或更高版本。

## 18.09.1

2019-01-09

#### 关于此版本的重要说明

在 18.09 之前的 Docker 版本中，containerd 由 Docker engine daemon 管理。在 Docker Engine 18.09 中，containerd 由 systemd 管理。由于 containerd 由 systemd 管理，任何更改挂载设置（例如 `MountFlags=slave`）的 `docker.service` systemd 配置的自定义配置都会破坏 Docker Engine daemon 和 containerd 之间的交互，您将无法启动容器。

运行以下命令获取 `docker.service` 的 `MountFlags` 属性的当前值：

```console
$ sudo systemctl show --property=MountFlags docker.service
MountFlags=
```

如果此命令打印非空的 `MountFlags` 值，请更新您的配置，并重新启动 docker 服务。

### 安全修复
* 将 Go 语言升级到 1.10.6 以解决 [CVE-2018-16873](https://nvd.nist.gov/vuln/detail/CVE-2018-16873)、[CVE-2018-16874](https://nvd.nist.gov/vuln/detail/CVE-2018-16874) 和 [CVE-2018-16875](https://nvd.nist.gov/vuln/detail/CVE-2018-16875)。
* 修复 authz 插件对 0 长度内容和路径验证的问题。
* 将 `/proc/asound` 添加到 masked paths [docker/engine#126](https://github.com/docker/engine/pull/126)

### 改进
* 更新到 BuildKit 0.3.3 [docker/engine#122](https://github.com/docker/engine/pull/122)
* 更新到 containerd 1.2.2 [docker/engine#144](https://github.com/docker/engine/pull/144)
* 为使用已弃用的旧 overlay 和 devicemapper 存储驱动提供额外警告 [docker/engine#85](https://github.com/docker/engine/pull/85)
* prune：在清理构建缓存之前执行镜像清理 [docker/cli#1532](https://github.com/docker/cli/pull/1532)
* 为实验性 CLI 命令（manifest）添加 bash 补全 [docker/cli#1542](https://github.com/docker/cli/pull/1542)
* Windows：在 Windows 10 上允许进程隔离 [docker/engine#81](https://github.com/docker/engine/pull/81)

### 修复
* 在 RHEL/CentOS 上禁用 runc 中的 kmem accounting (docker/escalation#614, docker/escalation#692) [docker/engine#121](https://github.com/docker/engine/pull/121)
* 修复低效的网络配置 [docker/engine#123](https://github.com/docker/engine/pull/123)
* 修复 docker system prune 不接受 until 过滤器的问题 [docker/engine#122](https://github.com/docker/engine/pull/122)
* 避免在 `containerd` 中取消设置凭据 [docker/engine#122](https://github.com/docker/engine/pull/122)
* 修复 Debian 上的 iptables 兼容性 [docker/engine#107](https://github.com/docker/engine/pull/107)
* 修复为 docker host 设置默认 schema 为 tcp 的问题 [docker/cli#1454](https://github.com/docker/cli/pull/1454)
* 修复 `service update --force` 的 bash 补全 [docker/cli#1526](https://github.com/docker/cli/pull/1526)
* Windows：清理时尝试 DetachVhd [docker/engine#113](https://github.com/docker/engine/pull/113)
* API：正确处理无效 JSON 以返回 400 状态 [docker/engine#110](https://github.com/docker/engine/pull/110)
* API：在 API < 1.39 上忽略 default-address-pools [docker/engine#118](https://github.com/docker/engine/pull/118)
* API：将缺失的默认地址池字段添加到 swagger [docker/engine#119](https://github.com/docker/engine/pull/119)
* awslogs：考虑限制中的 UTF-8 规范化 [docker/engine#112](https://github.com/docker/engine/pull/112)
* 禁止在 HTTP 错误响应中读取超过 1MB [docker/engine#114](https://github.com/docker/engine/pull/114)
* apparmor：允许接收来自 `docker kill` 的信号 [docker/engine#116](https://github.com/docker/engine/pull/116)
* overlay2：如果可能使用 index=off（修复挂载时的 EBUSY）[docker/engine#84](https://github.com/docker/engine/pull/84)

### 打包（Packaging）
* 为 docker.service 添加 docker.socket 要求。[docker/docker-ce-packaging#276](https://github.com/docker/docker-ce-packaging/pull/276)
* 为基于 RHEL 的发行版添加 socket 激活。[docker/docker-ce-packaging#274](https://github.com/docker/docker-ce-packaging/pull/274)
* 为 RPM 包添加 libseccomp 要求。[docker/docker-ce-packaging#266](https://github.com/docker/docker-ce-packaging/pull/266)

### 已知问题
* 从 18.09.0 升级到 18.09.1 时，Ubuntu 上的 `containerd` 没有升级到正确版本。
* 升级过程中有重要更改，如果未正确遵循，可能会影响升级期间 Swarm 上运行的应用程序的可用性。这些限制影响从 18.09 之前的任何版本升级到 18.09 或更高版本。

## 18.09.0

2018-11-08

### 关于此版本的重要说明

在 18.09 之前的 Docker 版本中，containerd 由 Docker engine daemon 管理。在 Docker Engine 18.09 中，containerd 由 systemd 管理。由于 containerd 由 systemd 管理，任何更改挂载设置（例如 `MountFlags=slave`）的 `docker.service` systemd 配置的自定义配置都会破坏 Docker Engine daemon 和 containerd 之间的交互，您将无法启动容器。

运行以下命令获取 `docker.service` 的 `MountFlags` 属性的当前值：

```console
$ sudo systemctl show --property=MountFlags docker.service
MountFlags=
```

如果此命令打印非空的 `MountFlags` 值，请更新您的配置，并重新启动 docker 服务。


### 新功能

* 将 API 版本更新到 1.39 [moby/moby#37640](https://github.com/moby/moby/pull/37640)
* 添加使用 SSH 进行远程连接的支持 [docker/cli#1014](https://github.com/docker/cli/pull/1014)
* Builder：向 API 添加 prune 选项 [moby/moby#37651](https://github.com/moby/moby/pull/37651)
* 向 `/info` 端点添加 "Warnings"，并将检测移至 daemon [moby/moby#37502](https://github.com/moby/moby/pull/37502)
* 允许在未启用实验模式的情况下运行 BuildKit 构建。现在可以在 daemon.json 中使用选项配置 Buildkit [moby/moby#37593](https://github.com/moby/moby/pull/37593) [moby/moby#37686](https://github.com/moby/moby/pull/37686) [moby/moby#37692](https://github.com/moby/moby/pull/37692) [docker/cli#1303](https://github.com/docker/cli/pull/1303) [docker/cli#1275](https://github.com/docker/cli/pull/1275)
* 使用 BuildKit 时添加对使用 `--secret` 标志的构建时 secrets 的支持 [docker/cli#1288](https://github.com/docker/cli/pull/1288)
* 使用 BuildKit 时添加 SSH agent socket 转发 (`docker build --ssh $SSHMOUNTID=$SSH_AUTH_SOCK`) [docker/cli#1438](https://github.com/docker/cli/pull/1438) / [docker/cli#1419](https://github.com/docker/cli/pull/1419)
* 在 Windows 上为 `ADD` 和 `COPY` 命令添加 `--chown` 标志支持 [moby/moby#35521](https://github.com/moby/moby/pull/35521)
* 添加 `builder prune` 子命令来清理 BuildKit 构建缓存 [docker/cli#1295](https://github.com/docker/cli/pull/1295) [docker/cli#1334](https://github.com/docker/cli/pull/1334)
* BuildKit：为 BuildKit 构建缓存添加可配置的垃圾回收策略 [docker/engine#59](https://github.com/docker/engine/pull/59) / [moby/moby#37846](https://github.com/moby/moby/pull/37846)
* BuildKit：使用 BuildKit 时添加对 `docker build --pull ...` 的支持 [moby/moby#37613](https://github.com/moby/moby/pull/37613)
* BuildKit：使用 BuildKit 时添加对 "registry-mirrors" 和 "insecure-registries" 的支持 [docker/engine#59](https://github.com/docker/engine/pull/59) / [moby/moby#37852](https://github.com/moby/moby/pull/37852)
* BuildKit：启用 net 模式和 bridge。[moby/moby#37620](https://github.com/moby/moby/pull/37620)
* 添加 `docker engine` 子命令来管理作为 containerd 之上的特权容器运行的 Docker Engine 的生命周期，并允许升级到 Docker Engine Enterprise [docker/cli#1260](https://github.com/docker/cli/pull/1260)
* 在 `docker info` 输出中公开产品许可证 [docker/cli#1313](https://github.com/docker/cli/pull/1313)
* 在 `docker info` 输出中显示 daemon 产生的警告 [docker/cli#1225](https://github.com/docker/cli/pull/1225)
* 添加 "local" 日志驱动 [moby/moby#37092](https://github.com/moby/moby/pull/37092)
* Amazon CloudWatch：添加 `awslogs-endpoint` 日志选项 [moby/moby#37374](https://github.com/moby/moby/pull/37374)
* 添加对全局默认地址池的支持 [moby/moby#37558](https://github.com/moby/moby/pull/37558) [docker/cli#1233](https://github.com/docker/cli/pull/1233)
* 将 containerd 日志级别配置为与 dockerd 相同 [moby/moby#37419](https://github.com/moby/moby/pull/37419)
* 添加 cri-containerd 的配置选项 [moby/moby#37519](https://github.com/moby/moby/pull/37519)
* 将 containerd client 更新到 v1.2.0-rc.1 [moby/moby#37664](https://github.com/moby/moby/pull/37664)、[docker/engine#75](https://github.com/docker/engine/pull/75) / [moby/moby#37710](https://github.com/moby/moby/pull/37710)
* 添加对全局默认地址池的支持 [moby/moby#37558](https://github.com/moby/moby/pull/37558) [docker/cli#1233](https://github.com/docker/cli/pull/1233)
* 将 `POST /session` 端点移出实验性。[moby/moby#40028](https://github.com/moby/moby/pull/40028)


### 改进

* 在 /info 响应中不返回 "`<unknown>`" [moby/moby#37472](https://github.com/moby/moby/pull/37472)
* BuildKit：将 `--console=[auto,false,true]` 更改为 `--progress=[auto,plain,tty]` [docker/cli#1276](https://github.com/docker/cli/pull/1276)
* BuildKit：设置 BuildKit 的 ExportedProduct 变量以在将来显示有用的错误。[moby/moby#37439](https://github.com/moby/moby/pull/37439)
* 当连接到不支持此选项的 daemon 时隐藏 `--data-path-addr` 标志 [docker/docker/cli#1240](https://github.com/docker/cli/pull/1240)
* 仅在启用 BuildKit 时显示 buildkit 特定的标志 [docker/cli#1438](https://github.com/docker/cli/pull/1438) / [docker/cli#1427](https://github.com/docker/cli/pull/1427)
* 改进版本输出对齐 [docker/cli#1204](https://github.com/docker/cli/pull/1204)
* 按自然顺序排序插件名称和网络 [docker/cli#1166](https://github.com/docker/cli/pull/1166)、[docker/cli#1266](https://github.com/docker/cli/pull/1266)
* 更新 bash 和 zsh [补全脚本](https://github.com/docker/cli/issues?q=label%3Aarea%2Fcompletion+milestone%3A18.09.0+is%3Aclosed)
* 将日志级别传递给 containerd。[moby/moby#37419](https://github.com/moby/moby/pull/37419)
* 在东西向 overlay 负载均衡中使用直接服务器返回（DSR）[docker/engine#93](https://github.com/docker/engine/pull/93) / [docker/libnetwork#2270](https://github.com/docker/libnetwork/pull/2270)
* Builder：使用 buildkit 时暂时禁用 bridge 网络。[moby/moby#37691](https://github.com/moby/moby/pull/37691)
* 在节点附件准备好之前阻止任务启动 [moby/moby#37604](https://github.com/moby/moby/pull/37604)
* 将提供的外部 CA 证书传播到 swarm 中的外部 CA 对象。[docker/cli#1178](https://github.com/docker/cli/pull/1178)
* 移除 Ubuntu 14.04 "Trusty Tahr" 作为支持的平台 [docker-ce-packaging#255](https://github.com/docker/docker-ce-packaging/pull/255) / [docker-ce-packaging#254](https://github.com/docker/docker-ce-packaging/pull/254)
* 移除 Debian 8 "Jessie" 作为支持的平台 [docker-ce-packaging#255](https://github.com/docker/docker-ce-packaging/pull/255) / [docker-ce-packaging#254](https://github.com/docker/docker-ce-packaging/pull/254)
* 移除 containerd 和 runc 二进制文件的 'docker-' 前缀 [docker/engine#61](https://github.com/docker/engine/pull/61) / [moby/moby#37907](https://github.com/moby/moby/pull/37907)、[docker-ce-packaging#241](https://github.com/docker/docker-ce-packaging/pull/241)
* 将 "engine"、"cli" 和 "containerd" 拆分到单独的包中，并将 containerd 作为单独的 systemd 服务运行 [docker-ce-packaging#131](https://github.com/docker/docker-ce-packaging/pull/131)、[docker-ce-packaging#158](https://github.com/docker/docker-ce-packaging/pull/158)
* 使用 Go 1.10.4 构建二进制文件 [docker-ce-packaging#181](https://github.com/docker/docker-ce-packaging/pull/181)
* 从版本字符串中移除 `-ce` 后缀 [docker-ce-packaging#206](https://github.com/docker/docker-ce-packaging/pull/206)

### 修复

* BuildKit：不取消 buildkit 状态请求。[moby/moby#37597](https://github.com/moby/moby/pull/37597)
* 修复 docker build 期间缺少构建参数时没有显示错误的问题 [moby/moby#37396](https://github.com/moby/moby/pull/37396)
* 修复添加 8GB 文件时出现 "unexpected EOF" 错误的问题 [moby/moby#37771](https://github.com/moby/moby/pull/37771)
* LCOW：确保在 `COPY`/`ADD` 上填充 platform。[moby/moby#37563](https://github.com/moby/moby/pull/37563)
* 修复将主机端口范围映射到单个容器端口的问题 [docker/cli#1102](https://github.com/docker/cli/pull/1102)
* 修复 `trust inspect` 的拼写错误："`AdminstrativeKeys`" [docker/cli#1300](https://github.com/docker/cli/pull/1300)
* 修复导入缺失变量和无名称变量的环境文件解析问题。[docker/cli#1019](https://github.com/docker/cli/pull/1019)
* 修复当 dangling images 列表很大时运行 `docker image prune` 可能出现的 "out of memory exception" [docker/cli#1432](https://github.com/docker/cli/pull/1432) / [docker/cli#1423](https://github.com/docker/cli/pull/1423)
* 修复 Windows 上 ConEmu 和 ConsoleZ 中的管道处理 [moby/moby#37600](https://github.com/moby/moby/pull/37600)
* 修复 Windows 上使用非 hns 管理的 Hyper-V 网络时启动缓慢的问题 [docker/engine#67](https://github.com/docker/engine/pull/67) / [moby/moby#37774](https://github.com/moby/moby/pull/37774)
* 修复当 "runtimes" 选项同时在配置文件和 cli 中定义时 daemon 不会启动的问题 [docker/engine#57](https://github.com/docker/engine/pull/57) / [moby/moby#37871](https://github.com/moby/moby/pull/37871)
* 放宽 `/etc/docker` 目录的权限以防止在使用 `docker manifest inspect` 时出现 "permission denied" 错误 [docker/engine#56](https://github.com/docker/engine/pull/56) / [moby/moby#37847](https://github.com/moby/moby/pull/37847)
* 修复 `cpuset-cpus` 和 `cpuset-mems` 中大数字导致的拒绝服务 [docker/engine#70](https://github.com/docker/engine/pull/70) / [moby/moby#37967](https://github.com/moby/moby/pull/37967)
* LCOW：向 `docker import` 添加 `--platform` [docker/cli#1375](https://github.com/docker/cli/pull/1375) / [docker/cli#1371](https://github.com/docker/cli/pull/1371)
* LCOW：在 Windows 上默认添加 LinuxMetadata 支持 [moby/moby#37514](https://github.com/moby/moby/pull/37514)
* LCOW：挂载到短容器路径以避免命令行长度限制 [moby/moby#37659](https://github.com/moby/moby/pull/37659)
* LCOW：修复构建器使用错误缓存层的问题 [moby/moby#37356](https://github.com/moby/moby/pull/37356)
* 修复使用 `--follow` 时 json-log 文件描述符泄漏 [docker/engine#48](https://github.com/docker/engine/pull/48) [moby/moby#37576](https://github.com/moby/moby/pull/37576) [moby/moby#37734](https://github.com/moby/moby/pull/37734)
* 修复在 kqueue 上关闭 watcher 时可能的死锁 [moby/moby#37392](https://github.com/moby/moby/pull/37392)
* 使用基于 poller 的 watcher 来解决 Windows 中的文件缓存问题 [moby/moby#37412](https://github.com/moby/moby/pull/37412)
* 通过向网络层提供适当的 resolv.conf 来处理 systemd-resolved 情况 [moby/moby#37485](https://github.com/moby/moby/pull/37485)
* 移除对 TLS < 1.2 的支持 [moby/moby#37660](https://github.com/moby/moby/pull/37660)
* Seccomp：在默认 seccomp 配置文件中将与 `CAP_SYS_NICE` 相关的系统调用列入白名单 [moby/moby#37242](https://github.com/moby/moby/pull/37242)
* Seccomp：将 syslog 系统调用移至由 `CAP_SYS_ADMIN` 或 `CAP_SYSLOG` 控制 [docker/engine#64](https://github.com/docker/engine/pull/64) / [moby/moby#37929](https://github.com/moby/moby/pull/37929)
* SELinux：修复在启用 selinux 的系统上通过 Mounts API 指定的本地卷的重新标记 [moby/moby#37739](https://github.com/moby/moby/pull/37739)
* 如果通过不安全连接访问 REST API 则添加警告 [moby/moby#37684](https://github.com/moby/moby/pull/37684)
* 在系统信息中显示时屏蔽 URL 中的代理凭据 [docker/engine#72](https://github.com/docker/engine/pull/72) / [moby/moby#37934](https://github.com/moby/moby/pull/37934)
* 修复 btrfs 的挂载传播 [docker/engine#86](https://github.com/docker/engine/pull/86) / [moby/moby#38026](https://github.com/moby/moby/pull/38026)
* 修复节点分配中的空指针解引用 [docker/engine#94](https://github.com/docker/engine/pull/94) / [docker/swarmkit#2764](https://github.com/docker/swarmkit/pull/2764)

### 已知问题

* 升级过程中有重要更改，如果未正确遵循，可能会影响升级期间 Swarm 上运行的应用程序的可用性。这些限制影响从 18.09 之前的任何版本升级到 18.09 或更高版本。
* 使用 https://github.com/boot2docker/boot2docker/releases/download/v18.09.0/boot2docker.iso 时，虚拟机上的节点会拒绝连接。在 virtualbox 创建的 docker-machine VM 中发布的任何 swarm 端口都不会响应。这发生在 macOS 和 Windows 10 上，使用 docker-machine 版本 0.15 和 0.16。

   以下 `docker run` 命令有效，允许从主机浏览器访问：

   `docker run -d -p 4000:80 nginx`

   但是，以下 `docker service` 命令失败，导致 curl/chrome 无法连接（连接被拒绝）：

   `docker service create -p 5000:80 nginx`

   使用 docker-machine 配置 18.09.0 云 VM 时不会出现此问题。

   解决方法：
   * 使用不依赖 boot2docker 的云 VM。
   * `docker run` 不受影响。
   * 对于 Swarm，设置 VIRTUALBOX_BOOT2DOCKER_URL=https://github.com/boot2docker/boot2docker/releases/download/v18.06.1-ce/boot2docker.iso。

   此问题在 18.09.1 中已解决。

### 弃用通知

- Docker 已弃用 Device Mapper 作为存储驱动的支持。它将继续在此时得到支持，但支持将在未来的版本中移除。

  [Overlay2 存储驱动](/manuals/engine/storage/drivers/overlayfs-driver.md) 现在是 Docker Engine 实现的默认设置。

有关已弃用标志和 API 的列表的更多信息，请查看[弃用信息](/engine/deprecated/)，其中包含目标移除日期。

### 生命周期终止通知

在此版本中，Docker 还移除了对 TLS < 1.2 [moby/moby#37660](https://github.com/moby/moby/pull/37660)、
Ubuntu 14.04 "Trusty Tahr" [docker-ce-packaging#255](https://github.com/docker/docker-ce-packaging/pull/255) / [docker-ce-packaging#254](https://github.com/docker/docker-ce-packaging/pull/254) 和 Debian 8 "Jessie" [docker-ce-packaging#255](https://github.com/docker/docker-ce-packaging/pull/255) / [docker-ce-packaging#254](https://github.com/docker/docker-ce-packaging/pull/254) 的支持。
